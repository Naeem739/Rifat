<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>2-Month Meal Tracker</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0d0d0d 100%);
      color: #e8f5e8;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      background: linear-gradient(45deg, #00e676, #00c853, #4caf50);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 32px;
      font-weight: 900;
      margin-bottom: 30px;
      text-shadow: 0 0 20px rgba(0, 230, 118, 0.3);
    }
    .header-section {
      text-align: center;
      margin-bottom: 30px;
    }
    .download-btn {
      background: linear-gradient(45deg, #00e676, #00c853);
      color: #000;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 900;
      margin: 10px;
      box-shadow: 0 4px 15px rgba(0, 230, 118, 0.3);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 230, 118, 0.4);
      background: linear-gradient(45deg, #00c853, #00e676);
    }
    .download-btn:active {
      transform: translateY(0);
    }
    .day-card {
      background: linear-gradient(145deg, #1b1b1b, #2a2a2a);
      border-radius: 15px;
      margin-bottom: 25px;
      padding: 20px;
      box-shadow: 0 8px 25px rgba(0,255,0,0.1);
      border: 1px solid rgba(0, 230, 118, 0.1);
      transition: all 0.3s ease;
    }
    .day-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0,255,0,0.15);
      border-color: rgba(0, 230, 118, 0.2);
    }
    .day-header {
      font-weight: 900;
      font-size: 22px;
      margin-bottom: 15px;
      color: #4caf50;
      text-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
      border-bottom: 2px solid rgba(0, 230, 118, 0.2);
      padding-bottom: 8px;
    }
    .meal-section {
      margin-bottom: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      padding: 15px;
      border-left: 4px solid #00e676;
    }
    .meal-title {
      font-weight: 900;
      margin-bottom: 10px;
      color: #81c784;
      font-size: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 8px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    .item:hover {
      background: rgba(0, 230, 118, 0.05);
    }
    .item span {
      font-weight: 900;
      flex: 1;
      font-size: 16px;
      color: #e8f5e8;
    }
    .checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid #00c853;
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      background: rgba(0, 200, 83, 0.1);
      transition: all 0.2s ease;
    }
    .checkbox:hover {
      border-color: #00e676;
      box-shadow: 0 0 10px rgba(0, 230, 118, 0.3);
    }
    .checkbox.checked::after {
      content: '‚úì';
      position: absolute;
      top: -1px;
      left: 4px;
      font-size: 18px;
      color: #00e676;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(0, 230, 118, 0.5);
    }
    .checkbox.disabled {
      cursor: not-allowed;
      opacity: 0.4;
      border-color: #666;
    }
    .complete-btn {
      background: linear-gradient(45deg, #00c853, #00e676);
      color: #000;
      border: none;
      padding: 10px 18px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 900;
      margin-top: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(0, 230, 118, 0.3);
      transition: all 0.3s ease;
    }
    .complete-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(0, 230, 118, 0.4);
    }
    .complete-btn:disabled {
      background: linear-gradient(45deg, #444, #666);
      color: #888;
      cursor: not-allowed;
      box-shadow: none;
    }
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 100vw;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      backdrop-filter: blur(5px);
    }
    .popup-box {
      background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
      border: 2px solid #00c853;
      border-radius: 15px;
      padding: 25px;
      max-width: 350px;
      text-align: center;
      color: #e8f5e8;
      font-weight: 900;
      box-shadow: 0 15px 40px rgba(0, 255, 0, 0.3);
      animation: popupSlide 0.3s ease;
    }
    @keyframes popupSlide {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .popup-box button {
      margin-top: 20px;
      background: linear-gradient(45deg, #00c853, #00e676);
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 20px;
      cursor: pointer;
      color: #000;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
    }
    .popup-box button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(0, 230, 118, 0.4);
    }
  </style>
</head>
<body>
  <div class="header-section">
    <h1>2-Month Meal Tracker</h1>
    <button class="download-btn" onclick="downloadReport()">üìä Download Report</button>
  </div>
  <div id="tracker"></div>
  <div id="popup-container"></div>

  <script>
    const tracker = document.getElementById("tracker");
    const popupContainer = document.getElementById("popup-container");
    const mealTimes = ["Breakfast", "Lunch", "Afternoon Snack", "Dinner"];
    
    // Load saved data from localStorage
    let saved = JSON.parse(localStorage.getItem("mealCheckmarks")) || {};
    let completed = JSON.parse(localStorage.getItem("mealCompleted")) || {};

    function formatDate(date) {
      return date.toISOString().split("T")[0];
    }

    function getDayName(date) {
      return date.toLocaleDateString('en-US', { weekday: 'long' });
    }

    function getMeals(date, mealTime) {
      const day = date.getDay();
      const dayOfMonth = date.getDate();
      
      if (mealTime === "Breakfast") {
        // Different breakfasts for different days
        if (day === 0) { // Sunday
          return ["‡¶™‡¶æ‡¶â‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß® ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶°‡¶ø‡¶Æ (‡ßß‡¶ü‡¶æ)", "‡¶ï‡¶≤‡¶æ (‡ßß‡¶ü‡¶æ)"];
        } else if (day === 5) { // Friday
          return ["‡¶ñ‡¶ø‡¶ö‡ßÅ‡¶°‡¶º‡¶ø (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶ö‡¶æ"];
        } else if (day === 6) { // Saturday
          return ["‡¶Ü‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶¶‡ßÅ‡¶ß"];
        } else {
          return ["‡¶Ü‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶ö‡¶æ"];
        }
      } else if (mealTime === "Lunch") {
        // Rotate lunch items based on day
        const lunchOptions = [
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶Æ‡¶æ‡¶õ (‡ßß ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶°‡¶æ‡¶≤"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶Æ‡¶æ‡¶Ç‡¶∏ (‡ßß ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶°‡¶æ‡¶≤"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶Æ‡¶æ‡¶õ (‡ßß ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶°‡¶ø‡¶Æ"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶Æ‡¶æ‡¶Ç‡¶∏ (‡ßß ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶°‡¶æ‡¶≤"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶Æ‡¶æ‡¶õ (‡ßß ‡¶ü‡ßÅ‡¶ï‡¶∞‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶°‡¶ø‡¶Æ"]
        ];
        return lunchOptions[day % 5];
      } else if (mealTime === "Afternoon Snack") {
        // Different snacks for different days
        if (day === 0 || day === 3) {
          return ["‡¶ö‡¶æ (‡¶ö‡¶ø‡¶®‡¶ø ‡¶õ‡¶æ‡¶°‡¶º‡¶æ)", "‡¶¨‡¶æ‡¶¶‡¶æ‡¶Æ (‡ßß‡ß¶‡¶ü‡¶æ)", "‡¶Ü‡¶™‡ßá‡¶≤ (‡ßß‡¶ü‡¶æ)"];
        } else if (day === 1 || day === 4) {
          return ["‡¶ö‡¶æ (‡¶ö‡¶ø‡¶®‡¶ø ‡¶õ‡¶æ‡¶°‡¶º‡¶æ)", "‡¶ï‡¶≤‡¶æ (‡ßß‡¶ü‡¶æ)", "‡¶ö‡¶ø‡¶°‡¶º‡¶æ"];
        } else {
          return ["‡¶ö‡¶æ (‡¶ö‡¶ø‡¶®‡¶ø ‡¶õ‡¶æ‡¶°‡¶º‡¶æ)", "‡¶¨‡¶æ‡¶¶‡¶æ‡¶Æ (‡ßß‡ß¶‡¶ü‡¶æ)", "‡¶´‡¶≤"];
        }
      } else if (mealTime === "Dinner") {
        // Rotate dinner items
        const dinnerOptions = [
          ["‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∂‡¶æ‡¶ï", "‡¶∏‡ßá‡¶¶‡ßç‡¶ß ‡¶°‡¶ø‡¶Æ (‡ßß‡¶ü‡¶æ)"],
          ["‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶¶‡ßÅ‡¶ß"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶∂‡¶æ‡¶ï", "‡¶°‡¶ø‡¶Æ"],
          ["‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶¶‡ßÅ‡¶ß"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶∂‡¶æ‡¶ï", "‡¶°‡¶ø‡¶Æ"],
          ["‡¶∞‡ßÅ‡¶ü‡¶ø (‡ß®‡¶ü‡¶æ)", "‡¶∏‡¶¨‡¶ú‡¶ø", "‡¶¶‡ßÅ‡¶ß"],
          ["‡¶≠‡¶æ‡¶§ (‡ßß ‡¶¨‡¶æ‡¶ü‡¶ø)", "‡¶∂‡¶æ‡¶ï", "‡¶°‡¶ø‡¶Æ"]
        ];
        return dinnerOptions[day];
      }
      return [];
    }

    function saveAll() {
      localStorage.setItem("mealCheckmarks", JSON.stringify(saved));
      localStorage.setItem("mealCompleted", JSON.stringify(completed));
    }

    function createCheckbox(id, disabled) {
      const box = document.createElement("div");
      box.className = "checkbox";
      box.dataset.id = id;
      if (saved[id]) box.classList.add("checked");
      if (disabled) box.classList.add("disabled");
      
      box.onclick = () => {
        const dayMealKey = id.split("-").slice(0,2).join("-");
        if (completed[dayMealKey]) return; // block after complete
        
        if (saved[id]) {
          delete saved[id];
          box.classList.remove("checked");
        } else {
          saved[id] = true;
          box.classList.add("checked");
        }
        saveAll();
      };
      return box;
    }

    function showPopup(message) {
      const overlay = document.createElement("div");
      overlay.className = "popup-overlay";
      
      const popup = document.createElement("div");
      popup.className = "popup-box";
      
      const msg = document.createElement("p");
      msg.innerHTML = message;
      
      const okBtn = document.createElement("button");
      okBtn.textContent = "OK";
      okBtn.onclick = () => overlay.remove();
      
      popup.appendChild(msg);
      popup.appendChild(okBtn);
      overlay.appendChild(popup);
      popupContainer.appendChild(overlay);
    }

    function completeAll(dayStr, meal, items, btn, section) {
      const manuallyChecked = items.filter(item => saved[`${dayStr}-${meal}-${item}`]);
      
      if (manuallyChecked.length > 0) {
        completed[`${dayStr}-${meal}`] = true;
        
        const allCheckboxes = section.querySelectorAll(".checkbox");
        allCheckboxes.forEach(box => box.classList.add("disabled"));
        
        btn.disabled = true;
        showPopup(`You have successfully completed your <strong>${meal}</strong>.`);
        saveAll();
      } else {
        showPopup(`Please check at least one item before completing your ${meal}.`);
      }
    }

    function downloadReport() {
      const startDate = new Date();
      startDate.setDate(5);
      
      let report = "=== 2-MONTH MEAL TRACKER REPORT ===\n\n";
      report += `Generated on: ${new Date().toLocaleDateString()}\n\n`;
      
      let totalCompleted = 0;
      let totalMeals = 0;
      
      for (let i = 0; i < 60; i++) {
        const date = new Date(startDate);
        date.setDate(startDate.getDate() + i);
        const dateStr = formatDate(date);
        const dayName = getDayName(date);
        
        report += `\n--- ${dateStr} (${dayName}) ---\n`;
        
        mealTimes.forEach(meal => {
          const items = getMeals(date, meal);
          const mealCompleted = completed[`${dateStr}-${meal}`];
          totalMeals++;
          
          if (mealCompleted) {
            totalCompleted++;
            report += `‚úÖ ${meal}: COMPLETED\n`;
          } else {
            const checkedItems = items.filter(item => saved[`${dateStr}-${meal}-${item}`]);
            if (checkedItems.length > 0) {
              report += `‚è≥ ${meal}: ${checkedItems.length}/${items.length} items checked\n`;
            } else {
              report += `‚ùå ${meal}: Not started\n`;
            }
          }
        });
      }
      
      const completionRate = ((totalCompleted / totalMeals) * 100).toFixed(1);
      report += `\n\n=== SUMMARY ===\n`;
      report += `Total Meals: ${totalMeals}\n`;
      report += `Completed: ${totalCompleted}\n`;
      report += `Completion Rate: ${completionRate}%\n`;
      
      const blob = new Blob([report], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `meal-tracker-report-${new Date().toISOString().split('T')[0]}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showPopup("üìä Report downloaded successfully!");
    }

    // Start from 5th of current month
    const startDate = new Date();
    startDate.setDate(5);

    // Generate 60 days (2 months) of tracking
    for (let i = 0; i < 60; i++) {
      const date = new Date(startDate);
      date.setDate(startDate.getDate() + i);
      const dateStr = formatDate(date);
      const dayName = getDayName(date);

      const card = document.createElement("div");
      card.className = "day-card";
      
      const header = document.createElement("div");
      header.className = "day-header";
      header.textContent = `${dateStr} (${dayName})`;
      card.appendChild(header);

      mealTimes.forEach(meal => {
        const section = document.createElement("div");
        section.className = "meal-section";
        
        const title = document.createElement("div");
        title.className = "meal-title";
        title.textContent = meal;
        section.appendChild(title);
        
        const items = getMeals(date, meal);
        const mealCompleted = completed[`${dateStr}-${meal}`];
        
        items.forEach(item => {
          const id = `${dateStr}-${meal}-${item}`;
          const row = document.createElement("div");
          row.className = "item";
          
          const label = document.createElement("span");
          label.textContent = item;
          
          const box = createCheckbox(id, mealCompleted);
          
          row.appendChild(label);
          row.appendChild(box);
          section.appendChild(row);
        });
        
        const btn = document.createElement("button");
        btn.className = "complete-btn";
        btn.textContent = "Complete";
        btn.disabled = mealCompleted;
        btn.onclick = () => completeAll(dateStr, meal, items, btn, section);
        
        section.appendChild(btn);
        card.appendChild(section);
      });
      
      tracker.appendChild(card);
    }
  </script>
</body>
</html>
